<odoo>
    <record id="hr_timesheet_line_tree_inherit" model="ir.ui.view">
        <field name="name">hr_timesheet_line_tree_inherit</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_tree"/>
        <field name="arch" type="xml">
            <!-- CLIENT -->
            <xpath expr="//field[@name='date']" position="after">
                <field name="partner_id" string="Client" options="{'no_create': True, 'no_edit': True}"/>
            </xpath>
            <!-- QUANTITE BULLETINS -->
            <xpath expr="//field[@name='unit_amount']" position="after">
                <field name="timesheet_quantity" invisible="1"/>
                <field name="nombre_bulletins" string="Nombre bulletins" attrs="{'readonly' : [('timesheet_quantity', '=', False)],'required' : [('timesheet_quantity', '=', True)]}"/>
            </xpath>
            <!-- TACHE -->
            <xpath expr="//field[@name='task_id']" position="attributes">
                <attribute name="domain">
                    [('partner_id', '=', partner_id), ('stage_id.is_closed','=',False)]
                </attribute>
                <attribute name="context"></attribute>
                <attribute name="attrs">{'required' : True}</attribute>
                <attribute name="options">{'no_quick_create':True}</attribute>
            </xpath>
            <!-- PROJECT -->
            <xpath expr="//field[@name='project_id']" position="attributes">
                <attribute name="domain">
                    [('partner_id', '=', partner_id)]
                </attribute>
                <attribute name="attrs">{'column_invisible' : True}</attribute>
            </xpath>
            <xpath expr="//field[@name='task_id']" position="after">
                <xpath expr="//field[@name='project_id']" position="move"/>
            </xpath>
        </field>
    </record>

    <!-- INTERVERTIR ONGLETS DESCRIPTION ET FEUILLES DE TEMPS -->
    <record model="ir.ui.view" id="abei_feuille_temps.view_task_form2_inherited">
        <field name="name">project.task.form.inherited</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="hr_timesheet.view_task_form2_inherited" />
        <field name="arch" type="xml">
            <!-- RETRAIT ONGLET 'Feuilles de temps' DE BASE DE ODOO -->
            <xpath expr="//notebook/page[@id='timesheets_tab']" position="after">
                <xpath expr="//notebook/page[@name='description_page']" position="move"/>
            </xpath>
        </field>
    </record>

    <!-- VUE LISTE DES TACHES, AJOUT DE LA COLONNE "Ajouter temps" POUR SAISIE DE TEMPS RAPIDE-->
    <record id="project_task_tree_abei_feuille_temps" model="ir.ui.view">
        <field name="name">project.task.tree.abei.feuille.temps</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='company_id']" position="after">
                <field name="timesheet_quantity" invisible="1"/>
                <field name="ajouter_temps"/>
                <field name="ajouter_quantite" attrs="{'readonly' : [('timesheet_quantity', '=', False)],'required' : [('timesheet_quantity', '=', True)]}"/>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="after">
                <xpath expr="//field[@name='project_id']" position="move"/>
            </xpath>
        </field>
    </record>
</odoo>

